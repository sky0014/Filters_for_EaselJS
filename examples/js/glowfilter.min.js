/*
GitHub : https://github.com/u-kudox/Filters_for_EaselJS
License : public domain
*/
this.createjs=this.createjs||{},function(a){"use strict";function b(a,b,c,d,e,f,g,h){isNaN(a)?(this._red=255,this._green=this._blue=0):this.color=a,this._blurFilter=new createjs.BlurFilter(c,d,f),this.alpha=void 0!==b?b:1,this.strength=void 0!==e?e:1,this.inner=!!g,this.knockout=!!h,this.usesContext=!0}var c=createjs.extend(b,createjs.Filter);Object.defineProperties(c,{color:{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(a){return this._red=a>>16&255,this._green=a>>8&255,this._blue=255&a,this.color},enumerable:!0},blurX:{get:function(){return this._blurFilter.blurX},set:function(a){return this._blurFilter.blurX=a,a},enumerable:!0},blurY:{get:function(){return this._blurFilter.blurY},set:function(a){return this._blurFilter.blurY=a,a},enumerable:!0},quality:{get:function(){return this._blurFilter.quality},set:function(a){return this._blurFilter.quality=a,a},enumerable:!0}}),c.getBounds=function(a){return this.inner?a:this._blurFilter.getBounds(a)},c.applyFilter=function(a,b,c,d,e,f,g,h){if((this.alpha<=0||this.strength<=0)&&!this.knockout)return!0;f=f||a,void 0===g&&(g=b),void 0===h&&(h=c);var i=f.getImageData(g,h,d,e),j=i.data,k=document.createElement("canvas");k.width=d,k.height=e;for(var l=k.getContext("2d"),m=l.getImageData(0,0,d,e),n=m.data,o=this.inner,p=this._red,q=this._green,r=this._blue,s=0,t=n.length;t>s;s+=4){var u=s+3,v=j[u];o?255!==v&&(n[s]=p,n[s+1]=q,n[s+2]=r,n[u]=255-v):0!==v&&(n[s]=p,n[s+1]=q,n[s+2]=r,n[u]=v)}l.putImageData(m,0,0);var w=this.strength;if(w>0){this._blurFilter.applyFilter(l,0,0,d,e),w>255&&(w=255);for(var x=1;w>x;x++)l.drawImage(k,0,0)}var y=this.alpha;0>y?y=0:y>1&&(y=1);var z;return z=this.knockout?o?"source-in":"source-out":o?"source-atop":"destination-over",f.save(),f.setTransform(1,0,0,1,0,0),f.globalAlpha=y,f.globalCompositeOperation=z,f.drawImage(k,g,h),f.restore(),!0},c.clone=function(){var a=this._blurFilter;return new createjs.GlowFilter(this.color,this.alpha,a.blurX,a.blurY,this.strength,a.quality,this.inner,this.knockout)},c.toString=function(){return"[GlowFilter]"},createjs.GlowFilter=createjs.promote(b,"Filter")}(window);